# linux下配置nodeJS环境

由于服务期出现了一些问题，所以不得不回滚服务器。于是又要重新对linux安装nodeJS。不得不说腾讯云弄这些比阿里云还是要麻烦许多了。

## 安装nodejs。

这一部分其实很简单，网上教程也很多。简单来讲就是从官网上下载linux版本的nodeJS的包，然后解压安装就好了。

[在linux安装nodejs](https://www.cnblogs.com/zhuawang/p/7617176.html)

经过这个之后你应该得到安装好了的一个文件夹，通常他应该类似于`node-v8.9.3-linux-x64`这样的一个文件夹。在这个文件夹当中就是node的所有文件。而在这个文件夹下的bin目录中你就能看到npm和node这两个文件。当你再通过npm全局安装一些模块时，这些模块的文件也会出现在这里（注意图片中的其他文件都是我之后安装的全局模块）。

![安装目录](./mdImag/20190714123456723.png)

## 设置软连接

在这个时候你使用node命令和npm命令将会告诉你无法识别这个命令。而你只能进入到如图所示的bin目录来执行`./node`来执行node命令。当然你也可以使用路径的全程 来执行node和npm的命令。但是无疑这种方法十分的不方便，因此我们可以通过设置软连接来实现和windows当中一样的体验。

> 建立软连接命令

**ln  -s  [原地址] [目标地址]**

    ln 表示链接
    -s 表示软
    [原地址] 表示要链接的地址
    [目标地址] 表示链接到的目标

如我使用的:

**ln -s /home/node/node-v8.9.3-linux-x64/bin/node /usr/local/bin/node**

**ln -s /home/node/node-v8.9.3-linux-x64/bin/npm /usr/local/bin/npm**

> 注意:node后面不要跟/

如。。/bin/node/  这会导致被认为是目录，而不是文件。

这个时候你就能正常的使用node和npm命令了。

## 设置全局变量环境

以上你就能够正常的使用node和npm的命令了。但是当你使用npm全局安装某一个模块的时候你就会发现，这个模块的命令无法全局使用了。当然同样你可以用他在node/bin/XXX的位置来执行他的相关命令。或者再使用软连接来链接它，使之可以在全局当中使用。

但是如果你所需要使用的全局模块众多的话，这显然并不太方便。因此你可以来设置将node目录中的bin文件设置为全局变量。

**步骤**

切换到根目录（~）

    cd ~

查看隐藏的文件

    ls -a

修改用户环境变量文件(实际上这种文件貌似很多)

    vi .bash_profile 

找到PATH字符串并在其之后添加你的node安装目录

    PATH=XXXX:XXXXX:/home/node/node-v8.9.3-linux-x64/bin

实际上这里配置环境变量和windows是类似的，只不过一个是在图形界面上，一个是在文件中。而值得注意的是linux中环境变量的分隔号是 **:** 而windows中是 **;** 

此时，你已经能够正常使用npm全局安装的模块了。

(其实我怀疑配置了环境变量之后，是不需要软连接就能正常使用node和npm等命令了，但是没有实验过。如果你知道相关的结果。请在评论区反馈)

## 如果你还没有成功

如果你还没有成功，请检查：

    1、 各个位置的路径是否填写正确了。
    2、 同时生成软连接，是否在/usr/local/bin/目录产生了对应的文件。
    3、 通过在安装的bin目录中执行 ./node -v 来验证nodejs本身是否安装成功了。

## 备注

如果你再腾讯云当中运行node之后，在外网无法访问你开启的服务。

请检查：

    1、 是否运行成功，并无报错。
    2、 腾讯云控制台的网络策略是否允许了相应端口和相应协议。
    3、 服务器内置的iptables的配置当中是否允许了相应端口。